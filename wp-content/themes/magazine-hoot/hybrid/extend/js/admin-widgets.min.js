!function(i){"use strict";i.fn.hybridextendWidgetIconPicker=function(){return this.each(function(){var e=i(this),t=e.siblings(".hybridext-icon-picker-box"),d=e.siblings(".hybridext-icon-picked"),r=d.children("i"),n=t.find("i");d.on("click",function(){t.toggle()}),n.on("click",function(){var d=i(this).data("value");n.removeClass("selected");var o=i(this).hasClass("cmb-icon-none")?"":"selected";i(this).addClass(o),r.removeClass().addClass("fa "+o+" "+d),e.val(d),e.trigger("change"),t.toggle()})})},i(document).on("click",function(e){i(e.target).closest(".hybridext-icon-picker-box").length||i(e.target).closest(".hybridext-icon-picked").length||i(".hybridext-icon-picker-box").hide()}),i.fn.hybridextendWidgetImageUpload=function(){return this.each(function(){if("undefined"!=typeof wp&&wp.media&&wp.media.editor){var e=i(this),t=e.siblings(".hybridext-image"),d=e.children(".hybridext-image-selected-img"),r=e.siblings(".hybridext-image-remove");r.on("click",function(i){i.preventDefault(),t.val(""),t.trigger("change"),d.css("background-image","none")}),e.on("click",function(i){var r=e.data("frame");return r?(r.open(),!1):(r=wp.media({title:e.data("title"),library:{type:e.data("library").split(",").map(function(i){return i.trim()})},button:{text:e.data("update"),close:!1}}),e.data("frame",r),r.on("select",function(){var i=r.state().get("selection").first().attributes;t.val(i.id),t.trigger("change");var e="";e="undefined"!=typeof i.sizes?"undefined"!=typeof i.sizes.thumbnail?i.sizes.thumbnail.url:i.sizes.full.url:i.icon,d.css("background-image","url("+e+")"),r.close()}),r.open(),!1)})}})},i.fn.hybridextendWidgetCollapser=function(){return this.each(function(){var e=i(this),t=e.siblings(".hybridext-collapse-body");e.on("click",function(){t.toggle()})})},i.fn.hybridextSetupWidget=function(){var e=function(e,r,n){e.find(".hybridext-widget-field-group-add").each(function(){var e=i(this),n=e.siblings(".hybridext-widget-field-group-items"),o=e.parent(".hybridext-widget-field-group").data("id"),s=window.hybridext_widget_helper[r][o];e.on("click",function(){var r=parseInt(i(this).data("iterator"));r++,i(this).data("iterator",r);var o=s.trim().replace(/975318642/g,r),a=i(o);t(a),d(a),a.find(".hybridext-icon").hybridextendWidgetIconPicker(),a.find(".hybridext-image-selected").hybridextendWidgetImageUpload(),a.find(".hybridext-color").wpColorPicker(),n.append(a),e.closest(".hybridext-widget-form").find("input").filter(":first").trigger("change")})}),e.find(".hybridext-widget-field-group-top").click(function(){i(this).toggleClass("open"),i(this).is(".open")?i(this).siblings(".hybridext-widget-field-group-items").find(".hybridext-widget-field-group-item-form").show():i(this).siblings(".hybridext-widget-field-group-items").find(".hybridext-widget-field-group-item-form").hide()})},t=function(e){e.find(".hybridext-widget-field-group-item-top").on("click",function(){i(this).siblings(".hybridext-widget-field-group-item-form").toggle()})},d=function(e){e.find(".hybridext-widget-field-group-remove").on("click",function(){i(this).closest(".hybridext-widget-form").find("input").filter(":first").trigger("change"),i(this).closest(".hybridext-widget-field-group-item").remove()})};return this.each(function(r,n){var o=i(n),s=o.data("class");if(i("body").hasClass("widgets-php")){if(o.data("hybridextend-form-setup")===!0)return!0;if(!o.is(":visible"))return!0}o.find(".hybridext-icon").hybridextendWidgetIconPicker(),o.find(".hybridext-image-selected").hybridextendWidgetImageUpload(),o.find(".hybridext-color").wpColorPicker(),o.find(".hybridext-collapse-head").hybridextendWidgetCollapser(),e(o,s,!1),t(o),d(o),o.find(".hybridext-widget-field-widgetid .widgetid").each(function(){var e=o.closest(".widget").attr("id"),t=i(this).data("baseid");t&&e&&(e=e.substring(e.indexOf(t)),i(this).html(" #"+e))}),o.trigger("hybridextendwidgetformsetup").data("hybridextend-form-setup",!0)})},i(".hybridext-widget-form").hybridextSetupWidget(),i(".widgets-holder-wrap").on("click",".widget:has(.hybridext-widget-form) .widget-top",function(){var e=i(this).closest(".widget").find(".hybridext-widget-form");setTimeout(function(){e.hybridextSetupWidget()},200)})}(jQuery);